
{include file="public/header" /}
</head>
<body data-type="generalComponents">

{include file="public/nav_header"/}

<div class="tpl-page-container tpl-page-header-fixed">
    {include file="public/nav_left"/}

    <div class="tpl-content-wrapper">
        <div class="tpl-portlet-components">
            <div class="portlet-title">
                <div class="caption font-green bold">
                    <span class="am-icon-code"></span> {$Tab}
                </div>
                <div class="tpl-portlet-input tpl-fz-ml">
                    <div class="portlet-input input-small input-inline">
                        <div class="input-icon right">
                            <i class="am-icon-search"></i>
                            <input type="text" class="form-control form-control-solid" placeholder="搜索..."> </div>
                    </div>
                </div>


            </div>
            <div class="tpl-block">

                <div class="am-g">
                    <div class="am-u-sm-12">
                        <form class="am-form">
                            <table class="am-table am-table-striped am-table-hover table-main">
                                <thead>
                                <tr>
                                    <th class="table-check"><input type="checkbox" class="tpl-table-fz-check"></th>
                                    <th class="table-id">ID</th>
                                    <th class="table-title">用户昵称</th>
                                    <th class="table-sex">性别</th>
                                    <th class="table-author am-hide-sm-only">注册时间</th>
                                    <th class="table-set">设置密码</th>
                                    <th class="table-date am-hide-sm-only">用户权限变更</th>
                                </tr>
                                </thead>
                                <tbody>
                                {volist name="list" id="vo"}
                                <tr>
                                    <td><input type="checkbox"></td>
                                    <td>{$vo.id}</td>
                                    <td>{$vo.name}</td>
                                    <td>男</td>
                                    <td class="am-hide-sm-only">授权时间</td>
                                    <td>
                                        <div class="am-btn-toolbar">
                                            <div class="am-btn-group am-btn-group-xs">
                                                <button
                                                    type="button" vid="{$vo.id}" value="{$vo.password}" class=" doc-prompt-toggle am-btn am-btn-default" >
                                                <span class="am-icon-pencil-square"></span>设置密码
                                                </button>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="am-hide-sm-only">
                                        {if condition = "$vo.viplevel eq 1"}
                                        <select data-am-selected user_id="{$vo.id}">
                                            <option value="1" selected>超级管理员</option>
                                            <option value="2">超级编辑</option>
                                            <option value="3">小编</option>
                                            <option value="4">校圈视频侠</option>
                                            <option value="5" >解忧人</option>
                                            <option value="10" >普通用户</option>
                                        </select>
                                        {elseif condition = "$vo.viplevel eq 2"}
                                        <select data-am-selected user_id="{$vo.id}">
                                            <option value="1">超级管理员</option>
                                            <option value="2" selected>超级编辑</option>
                                            <option value="3">小编</option>
                                            <option value="4">校圈视频侠</option>
                                            <option value="5" >解忧人</option>
                                            <option value="10" >普通用户</option>
                                        </select>
                                        {elseif condition = "$vo.viplevel eq 3"}
                                        <select data-am-selected user_id="{$vo.id}">
                                            <option value="1">超级管理员</option>
                                            <option value="2">超级编辑</option>
                                            <option value="3" selected>小编</option>
                                            <option value="4">校圈视频侠</option>
                                            <option value="5" >解忧人</option>
                                            <option value="10" >普通用户</option>
                                        </select>
                                        {elseif condition = "$vo.viplevel eq 4"}
                                        <select data-am-selected user_id="{$vo.id}">
                                            <option value="1">超级管理员</option>
                                            <option value="2">超级编辑</option>
                                            <option value="3" >小编</option>
                                            <option value="4" selected>校圈视频侠</option>
                                            <option value="5" >解忧人</option>
                                            <option value="10" >普通用户</option>
                                        </select>
                                        {elseif condition = "$vo.viplevel eq 5"}
                                        <select data-am-selected user_id="{$vo.id}">
                                            <option value="1">超级管理员</option>
                                            <option value="2">超级编辑</option>
                                            <option value="3" >小编</option>
                                            <option value="4" >校圈视频侠</option>
                                            <option value="5" selected>解忧人</option>
                                            <option value="10" >普通用户</option>
                                        </select>
                                        {else /}
                                        <select data-am-selected user_id="{$vo.id}">
                                            <option value="1">超级管理员</option>
                                            <option value="2">超级编辑</option>
                                            <option value="3" >小编</option>
                                            <option value="4" >校圈视频侠</option>
                                            <option value="5" >解忧人</option>
                                            <option value="10" selected>普通用户</option>
                                        </select>
                                        {/if}
                                    </td>

                                </tr>
                                {/volist}

                                </tbody>
                            </table>
                            <div class="am-cf">

                                <div class="am-fr">
                                    {$list->render()}
                                </div>
                            </div>
                            <hr>
                        </form>
                    </div>

                </div>
            </div>
            <div class="tpl-alert"></div>
        </div>
    </div>

</div>

<div class="am-modal am-modal-prompt" tabindex="-1" id="my-prompt">
    <div class="am-modal-dialog">
        <div class="am-modal-hd">设置密码</div>
        <div class="am-modal-bd">
            不可输入非法字符
            <input type="text" class="replayContent am-modal-prompt-input" placeholder="">
        </div>
        <div class="am-modal-footer">
            <span class="am-modal-btn" data-am-modal-cancel>取消</span>
            <span class="am-modal-btn" data-am-modal-confirm>提交</span>
        </div>
    </div>
</div>


<div class="am-modal am-modal-alert" tabindex="-1" id="my-alert">
    <div class="am-modal-dialog">
        <div class="am-modal-hd" id="alert_title">黑科Online_后台系统</div>
        <div class="am-modal-bd" id="alert">

        </div>
        <div class="am-modal-footer">
            <span class="am-modal-btn">确定</span>
        </div>
    </div>
</div>

<div class="am-modal am-modal-confirm" tabindex="-1" id="my-confirm">

    <div class="am-modal-dialog">
        <div class="am-modal-hd">危险操作</div>
        <div class="am-modal-bd">

        </div>
        <div class="am-modal-footer">
            <span class="am-modal-btn" data-am-modal-cancel>取消</span>
            <span class="am-modal-btn" data-am-modal-confirm>确定</span>
        </div>
    </div>
</div>

{include file="public/footer" /}
<script type="text/javascript">
    //用户权限变更
    $('select').change(function () {
        var identity = $(this).find("option:selected").text();
        var viplevel = $(this).find("option:selected").val();
        var id = $(this).attr('user_id');
        var url = "{:url('user/identityChange')}";
        var data = {
            'id':id,
            'viplevel':viplevel
        };
        $('.am-modal-bd').html("您，确定要将该用户的权限变更到"+identity+"吗?");
        $('#my-confirm').modal({
            onConfirm: function(options) {
                status_change(url,data);
            },
            onCancel: function() {
                window.location.reload()
            }
        });
    })

    //设置密码
    $('.doc-prompt-toggle').on('click', function() {
        $('.replayContent').attr('placeholder',$(this).val());
           var id = $(this).attr('vid');
           var url = "{:url('user/changePassword')}";
           var data = {
             'id':id
           };
        $('#my-prompt').modal({
            onConfirm: function(e) {
                  data.password = e.data;
                status_change(url,data);
            }
        });
    });

    //反馈查看
    // $('.see').click(function () {
    //     $('#view').html($(this).val());
    // });
    // //发布
    // $('.release').click(function () {
    //     var id = this.value;
    //     var url = "{:url('User/release')}";
    //     var data ={
    //         'id' : id,
    //         'status':1
    //     };
    //     status_change(url,data);
    // });
    //
    // //下线
    // $('.under').click(function () {
    //     var id = this.value;
    //     var url = "{:url('User/under')}";
    //     var data ={
    //         'id' : id,
    //         'status':0
    //     };
    //     status_change(url,data);
    // });
    //
    // //删除
    // $('.del').click(function () {
    //     var id = this.value;
    //     var url = "{:url('User/del')}";
    //     var data ={
    //         'id' : id,
    //         'status':-1
    //     };
    //     status_change(url,data);
    // })

</script>
</body>

</html>