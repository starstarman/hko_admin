{include file="public/header" /}
<link rel="stylesheet" href="__STATIC__/amazeUi/assets/css/preview.css">
</head>
<body data-type="generalComponents">

{include file="public/nav_header"/}

<div class="tpl-page-container tpl-page-header-fixed">
    {include file="public/nav_left"/}

    <div class="tpl-content-wrapper">
        <div class="tpl-portlet-components">
            <div class="portlet-title">
                <div class="caption font-green bold">
                    <span class="am-icon-code"></span> 新增文章
                </div>
                <div class="tpl-portlet-input tpl-fz-ml">
                    <div class="portlet-input input-small input-inline">
                        <div class="input-icon right">
                            <i class="am-icon-search"></i>
                            <input type="text" class="form-control form-control-solid" placeholder="搜索..."> </div>
                    </div>
                </div>


            </div>

            <div class="tpl-block">

                <div class="am-g">
                    <div class="tpl-form-body tpl-form-line">
                        <form class="am-form tpl-form-line-form">
                            <div class="am-form-group">
                                <label for="user-name" class="am-u-sm-3 am-form-label">标题 <span class="tpl-form-line-small-title">Title</span></label>
                                <div class="am-u-sm-9">
                                    <input type="text" class="tpl-form-input" id="user-name" placeholder="请输入标题文字">
                                    <small>请填写标题文字10-20字左右。</small>
                                </div>
                            </div>

                            <div class="am-form-group">
                                <label for="user-email" class="am-u-sm-3 am-form-label">发布时间 <span class="tpl-form-line-small-title">Time</span></label>
                                <div class="am-u-sm-9">
                                    <input type="text" class="am-form-field tpl-form-no-bg" placeholder="发布时间" data-am-datepicker="" readonly/>
                                    <small>发布时间为必填</small>
                                </div>
                            </div>

                            <div class="am-form-group">
                                <label for="user-phone" class="am-u-sm-3 am-form-label">分类 <span class="tpl-form-line-small-title">Type</span></label>
                                <div class="am-u-sm-9">
                                    <select data-am-selected="{searchBox: 1}">
                                        <option value="a">咨询</option>
                                        <option value="b">话题</option>
                                        <option value="o">赛事</option>
                                    </select>
                                </div>
                            </div>
                            <div class="am-form-group">
                                <label for="user-weibo" class="am-u-sm-3 am-form-label">作者 <span class="tpl-form-line-small-title">Author</span></label>
                                <div class="am-u-sm-9">
                                    <input type="text" id="user-weibo" placeholder="请输入您的名字或者化名">
                                    <div>

                                    </div>
                                </div>
                            </div>

                            <div class="am-form-group">
                                <label for="user-weibo" class="am-u-sm-3 am-form-label">封面图 <span class="tpl-form-line-small-title">Images</span></label>
                                <div class="am-u-sm-9">
                                    <div class="am-form-group am-form-file">
                                        <div class="tpl-form-file-img">
                                            <img src="../../../../public/static/amazeUi/assets/img/a5.png" alt="">
                                        </div>
                                        <button type="button" class="am-btn am-btn-danger am-btn-sm">
                                            <i class="am-icon-cloud-upload"></i> 添加封面图片</button>
                                        <input id="doc-form-file" type="file" multiple>
                                    </div>

                                </div>
                            </div>




                            <div class="am-form-group">
                                <label for="user-intro" class="am-u-sm-3 am-form-label">文章内容</label>
                                <div class="am-u-sm-9">
                                    <div id="editor">
                                        <b>请编辑您的文章内容</b>
                                    </div>
                                </div>

                            </div>

                            <div class="am-form-group">
                                <div class="am-u-sm-9 am-u-sm-push-3">
                                    <button type="button" id="preview" class="am-btn am-btn-danger tpl-btn-bg-color-danger ">预览</button>
                                    <button type="button" id="submit" class="am-btn am-btn-primary tpl-btn-bg-color-success ">提交</button>
                                </div>
                            </div>
                        </form>

                    </div>
                </div>
            </div>


        </div>
    </div>

</div>

{include file="public/footer" /}
<script type="text/javascript" src="__STATIC__/amazeUi/assets/js/wangEditor.min.js"></script>
<script type="text/javascript">
    var E = window.wangEditor;
    var editor = new E('#editor');
    // 自定义菜单配置
    editor.customConfig.menus = [
        'image',  // 插入图片
        'undo',  // 撤销
        'redo'  // 重复
    ];
    document.getElementById('submit').addEventListener('click', function () {
        // 读取 html
        alert(editor.txt.html())
    }, false);
    editor.customConfig.uploadImgMaxSize = 2 * 1024 * 1024;
    editor.customConfig.uploadImgMaxLength = 1;
    editor.customConfig.uploadFileName = 'image';
    // editor.customConfig.debug = true;
    editor.customConfig.uploadImgServer = "{:url('ImgUpload/upload')}" ; // 上传图片到服务器
    editor.create();

    $('#preview').click(function(){
        $(this).parent().parent().before("<div class=\"wx_phone_preview\">\n" +
            "        <span id='close' class=\"btn btn_default btn_phone_preview_closed jsPhoneViewClose\">关闭</span>\n" +
            "        <div class=\"wx_phone jsPhoneViewMain\">\n" +
            "            <div class=\"wx_phone_hd\">\n" +
            "    黑科大Aiteyou软件资源库\n" +
            "</div>\n" +
            "<div class=\"wx_phone_bd wx_phone_preview_card_wrp\"> \n" +
            "\n" +
            "    <div class=\"msg_card wx_phone_preview_card jsPhoneViewCard\" data-index=\"0\">\n" +
            "        <div class=\"msg_card_inner\">\n" +
            "            <div class=\"msg_card_bd\">\n" +
            "                <h4 class=\"msg_card_title\" title=\"sfdsgfds\">sfdsgfds</h4>\n" +
            "                <div class=\"msg_card_info\">\n" +
            "                    04月07日\n" +
            "                </div>\n" +
            "                \n" +
            "                <div class=\"msg_card_extra_info\" style=\"background-image:url('http://mmbiz.qpic.cn/mmbiz_jpg/3eoO5UJbdq1hTnMnFcG3ozo4G90EMcT5AyHUjq7gLe2UqPjW66zHJGI6MQuiazhmibnjQd0tY6omGFSfPazCDiaoQ/0?wx_fmt=jpeg');\">\n" +
            "                    <!--<img class=\"appmsg_thumb\" src=\"\">-->\n" +
            "                </div>\n" +
            "                \n" +
            "                <div class=\"msg_card_desc\" title=\"dsfgfdsgfdgfg\">dsfgfdsgfdgfg</div>\n" +
            "            </div>\n" +
            "            <div class=\"msg_card_ft\">\n" +
            "                <i class=\"icon_arrow_default\"></i>\n" +
            "                阅读原文            </div>\n" +
            "        </div>\n" +
            "    </div>\n" +
            "\n" +
            "</div>\n" +
            " \n" +
            "        </div>\n" +
            "        <!--jsPhoneViewMain-->\n" +
            "        \n" +
            "        \n" +
            "    </div>");
        $(this).parent().parent().before("<div class='preview-mask'></div>");
        $('#close').click(function(){
            $(".wx_phone_preview").remove();
            $(".preview-mask").remove();
        });
    });


</script>
</body>

</html>